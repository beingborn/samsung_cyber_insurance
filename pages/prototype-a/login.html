<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>삼성화재 | 사이버보험 모바일 웹</title>
        <link rel="stylesheet" href="../../resources/css/default.css" />
    </head>
    <body id="type-a">
        <form id="login-form" class="h-screen login-wrap inner">
            <div class="login-header pos-relative fade-in">
                <button type="button" class="pos-absolute pos-left-0 pos-top-0">
                    <img src="../../assets/images/icon/icon_arrow_left_tail.svg" alt="" />
                </button>
                <h1>
                    <img src="../../assets/images/logo/logo_text_pri_ko.svg" alt="삼성화재 사이버 보험" />
                </h1>
            </div>
            <div class="login-container fade-in">
                <img src="../../assets/images/tab_a.svg" alt="" />
                <div>
                    <div class="form-input">
                        <input name="id" type="text" placeholder="아이디 또는 이메일" />
                    </div>
                    <div class="form-input">
                        <input name="password" type="password" placeholder="패스워드" />
                    </div>
                </div>
                <ul class="login-links fade-in">
                    <li><a href="#">비밀번호 찾기</a></li>
                    <li><a href="#">아이디 찾기</a></li>
                    <li><a href="#" class="txt-pri weight-700">회원가입</a></li>
                </ul>
            </div>
            <!-- capcha 사용 시
            <button data-callback="onSubmit" data-action="submit" data-sitekey="6Ld1rUAsAAAAAOYyja1DbVtQmypwHL5UlL0Vr38i" class="btn btn-pri w-100 flex-item-bottom fade-in fade-in-animate g-recaptcha">로그인</button>
             -->

            <!-- 미사용 시 -->
            <button type="submit" class="btn btn-pri w-100 flex-item-bottom fade-in fade-in-animate">로그인</button>
        </form>
        <div class="cert-loading">
            <div class="loader-bar">
                <svg viewBox="0 0 100 100" width="48" height="48">
                    <g class="spinner">
                        <circle cx="50" cy="10" r="8" fill="#9BE7FF"></circle>
                        <circle cx="78" cy="18" r="8" fill="#5FD3FF"></circle>
                        <circle cx="90" cy="50" r="8" fill="#2CB7FF"></circle>
                        <circle cx="78" cy="82" r="8" fill="#1A8CFF"></circle>
                        <circle cx="50" cy="90" r="8" fill="#0F6CFF"></circle>
                        <circle cx="22" cy="82" r="8" fill="#2CB7FF"></circle>
                        <circle cx="10" cy="50" r="8" fill="#5FD3FF"></circle>
                        <circle cx="22" cy="18" r="8" fill="#9BE7FF"></circle>
                    </g>
                </svg>
            </div>
        </div>
        <div class="h-screen loading-wrap fixed">
            <div class="loading-cont fade-in">
                <p class="loading-tit">
                    사이버 보험으로<br />
                    <strong class="txt-pri">고객의 자산을 안전</strong>하게!
                </p>
                <img src="../../assets/images/icon/icon_loading_security.png" alt="" width="180" />
                <div class="loading-progress-wrap">
                    <progress class="progress" value="0" max="100" id="loading-progress"></progress>
                </div>
            </div>
            <div class="flex-item-bottom">
                <img src="../../assets/images/logo/logo_text_pri_en.svg" alt="삼성화재 사이버보험 영문" width="92" height="32" />
            </div>
        </div>

        <div id="intro-animation" class="fixed">
            <div class="h-screen intro-wrap">
                <img class="intro-img" src="../../assets/images/intro-d-1.png" alt="" />
            </div>
        </div>
        <script src="https://www.google.com/recaptcha/api.js"></script>
        <script src="../../resources/js/jquery-3.7.1.min.js"></script>
        <script src="../../resources/js/swiper-bundle.min.js"></script>
        <script src="../../resources/js/gsap.min.js"></script>
        <script src="../../resources/js/ScrollSmoother.js"></script>
        <script src="../../resources/js/ScrollTrigger.js"></script>
        <script src="../../resources/js/common.js"></script>
        <script>
            function showProgressLoading(speed = 50, delay = 0, callback = function () {}) {
                $('.loading-wrap').css('display', 'flex');

                setTimeout(() => {
                    let initValue = 0;

                    let loadingTimer = setInterval(() => {
                        $('#loading-progress').attr('value', initValue++);

                        if (+$('#loading-progress').attr('value') === 100) {
                            clearInterval(loadingTimer);

                            callback();
                        }
                    }, speed);
                }, delay);
            }

            function showLoading(delay) {
                $('.cert-loading').css({
                    display: 'flex',
                    position: 'absolute',
                    left: '50%',
                    transform: 'translateX(-50%)',
                    top: '0',
                    width: '100%',
                    height: '100%',
                    zIndex: 1000000,
                    background: 'rgba(255,255,255,0.5)',
                });

                if (delay) {
                    setTimeout(() => {
                        $('.cert-loading').fadeOut(500);
                    }, delay);
                }
            }

            function loginIntroAnimation() {
                $('.cert-loading').css('display', 'none');
                $('#login-form').hide();
                $('#intro-animation').fadeIn(500);

                setTimeout(function () {
                    $('#intro-animation').fadeOut(500);
                    $('#login-form').fadeIn(300);
                }, 3000);
            }

            loginIntroAnimation();

            // Login Form Submit Event
            const loginForm = document.querySelector('#login-form');

            function onSubmit(token) {
                return;

                // 2. 로딩 화면 표시
                showLoading();

                setTimeout(() => {
                    $('.cert-loading').hide();
                    showProgressLoading(20, 500, function () {
                        window.location.href = './main.html';
                    });
                }, 1000);

                // 1. 토큰이 정상적으로 생성되었는지 확인
                console.log('reCAPTCHA Token:', token);
            }

            loginForm.addEventListener('submit', (event) => {
                event.preventDefault();

                showLoading();

                setTimeout(() => {
                    $('.cert-loading').hide();

                    showProgressLoading(50, 500, function () {
                        window.location.href = './main.html';
                    });
                }, 500);
            });
        </script>
    </body>
</html>
